<link rel="import" href="../../bower_components/polymer/polymer.html">

<polymer-element name="event-item" attributes="i">
  <template>
    <link rel="stylesheet" href="event-item.css">
    <core-ajax auto url="{{i.url}}" handleAs="json" contentType="application/json" response="{{response}}"></core-ajax>
    <paper-shadow z="1" style="-webkit-margin-after:1em;padding:.5em" vertical layout>
      <div horizontal layout>
        <h3 style="-webkit-margin-after:0em;-webkit-margin-before:0em;" start-justified flex self-end>{{i.name}}</h3>
        <h6 style="-webkit-margin-after:0em;-webkit-margin-before:0em;color:gray" end-justified flex self-end>&nbsp;{{i.members.length}} member(s)</h6>
      </div>
      <div horizontal center-justified layout>  
        <!-- <h6 style="-webkit-margin-before:0em;-webkit-margin-after:0em;" start-justified self-center>Join with:</h6> -->
        <!-- <h4 style="-webkit-margin-before:0em;-webkit-margin-after:0em;font-weight:normal" self-center>&nbsp;#{{i.tag}}</h4> -->
        <paper-button class="hover" on-click="{{tweet}}" center-justified>&nbsp;#{{i.tag}}</paper-button>    
      </div>
    </div>
  </template>
  <script>
    (function () {
      Polymer({
        ready: function(){
          console.log(this.i);
        },
        responseChanged: function(oldValue) {
          console.log(this.response);
          this.i.members = this.response.data.members;
          this.i.tag = this.response.data.tag;
        },
        tweet: function(){
          window.open("https://twitter.com/share?url=a&hashtags=opossum&text=Use%20%23"+this.i.tag+"%20to%20come%20hang%20out!");
        }
      });
    })();
  </script>
<script>
</script>
</polymer-element>
